import"./modulepreload-polyfill-B5Qt9EMX.js";import{getDatabase as g,ref as E,get as A,child as u}from"https://www.gstatic.com/firebasejs/9.15.0/firebase-database.js";import{initializeApp as _}from"https://www.gstatic.com/firebasejs/9.15.0/firebase-app.js";import{GoogleAuthProvider as d,getAuth as S,signInWithPopup as f,signOut as R}from"https://www.gstatic.com/firebasejs/9.15.0/firebase-auth.js";var e={};const p={apiKey:e.FIREBASE_API_KEY.replace(/"/g,""),authDomain:e.FIREBASE_AUTH_DOMAIN.replace(/"/g,""),projectId:e.FIREBASE_PROJECT_ID.replace(/"/g,""),storageBucket:e.FIREBASE_STORAGE_BUCKET.replace(/"/g,""),messagingSenderId:e.FIREBASE_MESSAGING_SENDER_ID.replace(/"/g,""),appId:e.FIREBASE_APP_ID.replace(/"/g,""),measurementId:e.FIREBASE_MEASUREMENT_ID.replace(/"/g,""),databaseURL:e.FIREBASE_DATABASE_URL.replace(/"/g,"")},c=_(p),B=new d(c),m=S(c),y=g(c);E(y,"allowed");let n="",i="";sessionStorage.setItem("myEmail",n);sessionStorage.setItem("myName",i);let r=!1;const h=document.getElementById("signinBtn");console.log(p);function D(l){const t=E(g());return A(u(t,l)).then(a=>a.exists()?a.val():(console.log("No data available"),0)).catch(a=>(console.error(a),0))}h.addEventListener("click",async l=>{await f(m,B).then(async t=>{d.credentialFromResult(t).accessToken;const s=t.user,I=Object.keys(await D("allowed"));for(let o of I)o=o.replace(/,/g,"."),s.email==o&&(r=!0);r?(n=s.email,i=s.displayName,sessionStorage.setItem("myEmail",n),sessionStorage.setItem("myName",i)):R(m)}).catch(t=>{t.code;const a=t.message;alert(a)}),r&&(window.location.href="/addReu.html")});
