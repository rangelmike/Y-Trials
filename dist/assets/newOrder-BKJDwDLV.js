import"./modulepreload-polyfill-B5Qt9EMX.js";import{getDatabase as R,onValue as h,ref as d,update as _,get as x,child as N}from"https://www.gstatic.com/firebasejs/9.15.0/firebase-database.js";import{initializeApp as w}from"https://www.gstatic.com/firebasejs/9.15.0/firebase-app.js";import{getAuth as F,signOut as L}from"https://www.gstatic.com/firebasejs/9.15.0/firebase-auth.js";var l={FIREBASE_API_KEY:'"AIzaSyBnbcPg2bm9uNHtQvSCKwneB9qyUC4RYPs"',FIREBASE_AUTH_DOMAIN:'"y-trials.firebaseapp.com"',FIREBASE_DATABASE_URL:'"https://y-trials-default-rtdb.firebaseio.com"',FIREBASE_PROJECT_ID:'"y-trials"',FIREBASE_STORAGE_BUCKET:'"y-trials.appspot.com"',FIREBASE_MESSAGING_SENDER_ID:'"38252670103"',FIREBASE_APP_ID:'"1:38252670103:web:e93dd07b17de6537bc4dd2"',FIREBASE_MEASUREMENT_ID:'"G-DHZ2M1NK82"',SPREADSHEET_APP_ID:'"https://script.google.com/macros/s/AKfycbxCcBN7Ono829TeRK8iB3QQmZCsBSrds_h4a0pXClcl8T6SEo-TM4oEAShs5fCRXP1V/exec"'};const T={apiKey:l.FIREBASE_API_KEY.replace(/"/g,""),authDomain:l.FIREBASE_AUTH_DOMAIN.replace(/"/g,""),projectId:l.FIREBASE_PROJECT_ID.replace(/"/g,""),storageBucket:l.FIREBASE_STORAGE_BUCKET.replace(/"/g,""),messagingSenderId:l.FIREBASE_MESSAGING_SENDER_ID.replace(/"/g,""),appId:l.FIREBASE_APP_ID.replace(/"/g,""),measurementId:l.FIREBASE_MEASUREMENT_ID.replace(/"/g,""),databaseURL:l.FIREBASE_DATABASE_URL.replace(/"/g,"")},C=w(T),m=R(C),k=F(C),b=document.getElementById("block");let u;const P=document.getElementById("loader");document.getElementById("theme-toggle").addEventListener("click",function(){const e=document.body,t=document.getElementById("theme-icon");e.classList.toggle("dark-mode"),e.classList.toggle("light-mode"),e.classList.contains("dark-mode")?(t.textContent="üåô",localStorage.setItem("theme","dark")):(t.textContent="‚òÄÔ∏è",localStorage.setItem("theme","light"))});window.addEventListener("DOMContentLoaded",e=>{const t=localStorage.getItem("theme"),o=document.body,a=document.getElementById("theme-icon");t?(o.classList.add(t+"-mode"),a.textContent=t==="dark"?"üåô":"‚òÄÔ∏è"):(o.classList.add("light-mode"),a.textContent="‚òÄÔ∏è")});document.getElementById("logoutBtn").addEventListener("click",()=>{L(k),window.location.href="index.html"});function O(e){const t=d(R());return x(N(t,e)).then(o=>o.exists()?o.val():(console.log("No data available"),0)).catch(o=>(console.error(o),0))}function M(e){return e=="none"?"block":"none"}function U(e){return e.replace(/\s*,\s*/g,",").split(",")}function K(e,t,o){const a=e.indexOf(t);a!==-1&&e.splice(a,1),o!=""&&e.push(o);const E={};return e.forEach(i=>{const s=i.replace(/\./g,",");E[s]=!0}),E}window.onload=async function(){const e=sessionStorage.getItem("myEmail"),t=sessionStorage.getItem("myName");document.getElementById("email").textContent=e,document.getElementById("name").textContent=t,e==""&&(window.location.href="index.html");const o=Object.keys(await O("jefe"))[0].replace(/,/g,".");e!=o&&(window.location.href="addReu.html"),P.style.display="none",h(d(m,"personas"),function(a){if(a.exists()){b.innerHTML="";const E=Object.entries(a.val());for(const n of E){if(n[1].subs==null||n[1].subs=="")continue;const f=document.createElement("div"),v=document.createElement("h4");v.textContent=n[0],f.append(v);const c=document.createElement("div");c.classList="data",c.style.display="none";const A=document.createElement("div"),r=document.createElement("input");r.value=n[1].email,A.append(document.createElement("h5").textContent="Email: "),A.append(r),c.append(A);const S=document.createElement("div"),p=document.createElement("input");p.value=n[1].subs,S.append(document.createElement("h5").textContent="Subordinados: "),S.append(p),c.append(S);const B=document.createElement("div"),g=document.createElement("input");B.append(document.createElement("h5").textContent="Nombre del Centro: "),g.value=n[1].NombreCentro,B.append(g),c.append(B),f.append(c),v.addEventListener("click",()=>{c.style.display=M(c.style.display)});const y=document.createElement("button");y.textContent="Confirmar",c.append(y),b.append(f),y.addEventListener("click",()=>{p.value==""&&(g.value="",r.value=""),_(d(m,`personas/${n[0]}`),{NombreCentro:g.value,email:r.value,subs:U(p.value)});const D=K(u,n[1].email,r.value);_(d(m),{allowed:D})})}const i=document.createElement("div"),s=document.createElement("input"),I=document.createElement("button");s.placeholder="Nombre del Nuevo Jefe",I.textContent="Registrar Nuevo Jefe",i.append(s),i.append(I),b.append(i),I.addEventListener("click",function(){const n=s.value;if(s.value==""||n.includes(".")||n.includes("/")||n.includes("[")||n.includes("]")||n.includes("#")||n.includes("$")){alert("Entrada no v√°lida (no puede contener '.' '#' '$' '[' ']' '/' o estar vac√≠a)");return}_(d(m,`personas/${s.value.trimEnd()}`),{subs:s.value.trimEnd()})})}else console.log("noData")})};h(d(m,"allowed"),function(e){if(e.exists()){u=Object.keys(e.val());for(let t=0;t<u.length;t++)u[t]=u[t].replace(/,/g,".")}});
