import{getDatabase as u,update as b,ref as m}from"https://www.gstatic.com/firebasejs/9.15.0/firebase-database.js";import{initializeApp as R}from"https://www.gstatic.com/firebasejs/9.15.0/firebase-app.js";import{getAuth as B}from"https://www.gstatic.com/firebasejs/9.15.0/firebase-auth.js";var c={FIREBASE_API_KEY:'"AIzaSyBnbcPg2bm9uNHtQvSCKwneB9qyUC4RYPs"',FIREBASE_AUTH_DOMAIN:'"y-trials.firebaseapp.com"',FIREBASE_DATABASE_URL:'"https://y-trials-default-rtdb.firebaseio.com"',FIREBASE_PROJECT_ID:'"y-trials"',FIREBASE_STORAGE_BUCKET:'"y-trials.appspot.com"',FIREBASE_MESSAGING_SENDER_ID:'"38252670103"',FIREBASE_APP_ID:'"1:38252670103:web:e93dd07b17de6537bc4dd2"',FIREBASE_MEASUREMENT_ID:'"G-DHZ2M1NK82"',SPREADSHEET_APP_ID:'"https://script.google.com/macros/s/AKfycbxCcBN7Ono829TeRK8iB3QQmZCsBSrds_h4a0pXClcl8T6SEo-TM4oEAShs5fCRXP1V/exec"'};const D={apiKey:c.FIREBASE_API_KEY.replace(/"/g,""),authDomain:c.FIREBASE_AUTH_DOMAIN.replace(/"/g,""),projectId:c.FIREBASE_PROJECT_ID.replace(/"/g,""),storageBucket:c.FIREBASE_STORAGE_BUCKET.replace(/"/g,""),messagingSenderId:c.FIREBASE_MESSAGING_SENDER_ID.replace(/"/g,""),appId:c.FIREBASE_APP_ID.replace(/"/g,""),measurementId:c.FIREBASE_MEASUREMENT_ID.replace(/"/g,""),databaseURL:c.FIREBASE_DATABASE_URL.replace(/"/g,"")},l=R(D),g=u(l);B(l);function n(s){let o=0;for(const e of s)o+=e;return o}function f(s){let o="";for(const e of s)o+=`${e}, `;return o.slice(0,-2)}async function P(s,o){let e=2;const a=c.SPREADSHEET_APP_ID.replace(/"/g,"");for(let r=0;r<Object.values(s).length;r++){const t=Object.entries(s)[r],E=t[0];if(E==o)continue;const d=t[1].wentDates!=null?Object.values(t[1].wentDates).length:0,p=t[1].missedDates!=null?Object.values(t[1].missedDates).length:0,A=t[1].rprts!=null?n(Object.values(t[1].rprts)):0,S=t[1].ejercicio!=null?n(Object.values(t[1].ejercicio)):0,_=t[1].cuotas!=null?n(Object.values(t[1].cuotas)):0,I=t[1].listBooks!=null?f(Object.values(t[1].listBooks)):"";await fetch(a,{method:"POST",headers:{"Content-Type":"application/json"},mode:"no-cors",body:JSON.stringify({A:E,B:d,C:p,E:A,G:S,I:_,J:I,Z:e})}).catch(i=>{console.error("Error:",i),alert("Error: "+i.message)}),e++}await fetch(a,{method:"POST",headers:{"Content-Type":"application/json"},mode:"no-cors",body:JSON.stringify({desde:e})}).then(r=>{alert("Hoja de CÃ¡lculo actualizada correctamente")}).catch(r=>{console.error("Error:",r),alert("Error: "+r.message)})}function v(s){let o={};for(let e=0;e<Object.values(s).length;e++){const a=Object.entries(s)[e];if(a[1].subs!=null&&a[1].subs!=""){const r={subs:a[1].subs,email:a[1].email,NombreCentro:a[1].NombreCentro};o[a[0]]=r}}b(m(g,"/"),{personas:o}).then(e=>{alert("Base de Datos actualizada correctamente")}).catch(e=>{console.error("Error:",e),alert("Error: "+e)})}export{v as r,P as u};
