import"./modulepreload-polyfill-B5Qt9EMX.js";import{getDatabase as I,ref as m,get as d,child as S}from"https://www.gstatic.com/firebasejs/9.15.0/firebase-database.js";import{initializeApp as g}from"https://www.gstatic.com/firebasejs/9.15.0/firebase-app.js";import{GoogleAuthProvider as A,getAuth as p,signInWithPopup as R,signOut as B}from"https://www.gstatic.com/firebasejs/9.15.0/firebase-auth.js";var e={FIREBASE_API_KEY:'"AIzaSyBnbcPg2bm9uNHtQvSCKwneB9qyUC4RYPs"',FIREBASE_AUTH_DOMAIN:'"y-trials.firebaseapp.com"',FIREBASE_DATABASE_URL:'"https://y-trials-default-rtdb.firebaseio.com"',FIREBASE_PROJECT_ID:'"y-trials"',FIREBASE_STORAGE_BUCKET:'"y-trials.appspot.com"',FIREBASE_MESSAGING_SENDER_ID:'"38252670103"',FIREBASE_APP_ID:'"1:38252670103:web:e93dd07b17de6537bc4dd2"',FIREBASE_MEASUREMENT_ID:'"G-DHZ2M1NK82"'};const u={apiKey:e.FIREBASE_API_KEY.replace(/"/g,""),authDomain:e.FIREBASE_AUTH_DOMAIN.replace(/"/g,""),projectId:e.FIREBASE_PROJECT_ID.replace(/"/g,""),storageBucket:e.FIREBASE_STORAGE_BUCKET.replace(/"/g,""),messagingSenderId:e.FIREBASE_MESSAGING_SENDER_ID.replace(/"/g,""),appId:e.FIREBASE_APP_ID.replace(/"/g,""),measurementId:e.FIREBASE_MEASUREMENT_ID.replace(/"/g,""),databaseURL:e.FIREBASE_DATABASE_URL.replace(/"/g,"")},n=g(u),f=new A(n),l=p(n),y=I(n);m(y,"allowed");let E="",i="";sessionStorage.setItem("myEmail",E);sessionStorage.setItem("myName",i);let o=!1;const D=document.getElementById("signinBtn");function F(c){const t=m(I());return d(S(t,c)).then(a=>a.exists()?a.val():(console.log("No data available"),0)).catch(a=>(console.error(a),0))}D.addEventListener("click",async c=>{await R(l,f).then(async t=>{A.credentialFromResult(t).accessToken;const s=t.user,_=Object.keys(await F("allowed"));for(let r of _)r=r.replace(/,/g,"."),s.email==r&&(o=!0);o?(E=s.email,i=s.displayName,sessionStorage.setItem("myEmail",E),sessionStorage.setItem("myName",i)):B(l)}).catch(t=>{t.code;const a=t.message;alert(a)}),o&&(window.location.href="/addReu.html")});
