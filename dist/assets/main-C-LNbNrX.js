import"./modulepreload-polyfill-B5Qt9EMX.js";import{getDatabase as g,ref as E,get as I,child as A}from"https://www.gstatic.com/firebasejs/9.15.0/firebase-database.js";import{initializeApp as u}from"https://www.gstatic.com/firebasejs/9.15.0/firebase-app.js";import{GoogleAuthProvider as d,getAuth as _,signInWithPopup as S,signOut as f}from"https://www.gstatic.com/firebasejs/9.15.0/firebase-auth.js";var e={};const R={apiKey:e.FIREBASE_API_KEY.replace(/"/g,""),authDomain:e.FIREBASE_AUTH_DOMAIN.replace(/"/g,""),projectId:e.FIREBASE_PROJECT_ID.replace(/"/g,""),storageBucket:e.FIREBASE_STORAGE_BUCKET.replace(/"/g,""),messagingSenderId:e.FIREBASE_MESSAGING_SENDER_ID.replace(/"/g,""),appId:e.FIREBASE_APP_ID.replace(/"/g,""),measurementId:e.FIREBASE_MEASUREMENT_ID.replace(/"/g,""),databaseURL:e.FIREBASE_DATABASE_URL.replace(/"/g,"")},c=u(R),B=new d(c),m=_(c),y=g(c);E(y,"allowed");let n="",i="";sessionStorage.setItem("myEmail",n);sessionStorage.setItem("myName",i);let o=!1;const h=document.getElementById("signinBtn");function D(l){const t=E(g());return I(A(t,l)).then(a=>a.exists()?a.val():(console.log("No data available"),0)).catch(a=>(console.error(a),0))}h.addEventListener("click",async l=>{await S(m,B).then(async t=>{d.credentialFromResult(t).accessToken;const s=t.user,p=Object.keys(await D("allowed"));for(let r of p)r=r.replace(/,/g,"."),s.email==r&&(o=!0);o?(n=s.email,i=s.displayName,sessionStorage.setItem("myEmail",n),sessionStorage.setItem("myName",i)):f(m)}).catch(t=>{t.code;const a=t.message;alert(a)}),o&&(window.location.href="/addReu.html")});
